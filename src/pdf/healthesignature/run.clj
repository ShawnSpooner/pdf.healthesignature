(ns pdf.healthesignature.run
  (:require [pdf.healthesignature.core :as pdf])
  (:import [java.io FileInputStream]
           [java.security KeyStore]))

(defn get-cert [path password]
  (let [alias "sigmed"
        pass (.toCharArray password)]
    (with-open [fis (FileInputStream. path)]
      (let [store (doto (KeyStore/getInstance "JCEKS")
                (.load fis pass))]
            [(.getKey store alias pass)
             (.getCertificateChain store alias)]))))

(def form  {
    :name "New Patient Screening V2",
    :patientId "2",
    :fields [{
      :type "dateField",
      :value "2012-07-26",
      :title "Date",
      :name "Date",
      :oldValue "none"}
    {
      :type "textField",
      :value "Plankmank",
      :name "Name",
      :title "Name",
      :oldValue "none"}
      {:type "dateField", :value "2012-07-26", :title "Date of Birth", :name "Date of Birth"}
      {:type "textField", :value "A Chump", :name "Previous Name", :title "Previous Name if applicable"}
      {:type "textField", :value "", :name "address", :title "Address"}
      {:type "textField", :value "", :name "city", :title "City"}
      {:type "textField", :value "", :name "stage", :title "State"}
      {:type "textField", :value "", :name "zip", :title "Zip Code"}
      {:type "textField", :value "", :name "phone", :title "Phone number to reach you"}
      {:type "textField", :value "", :name "doc", :title "Name of current or most recent Doctor"}
      {:type "textArea", :value "", :name "meds", :title "List of Current Medications and Prescriber"}
      {:type "toggle", :value "yes", :name "slider1", :title "Are you and EMMC employee or spouse of an employee", :options [{:display "no", :value "no"} {:display "yes", :value "yes"}]}
      {:type "toggle", :value "yes", :name "slider2", :title "Have you been hospilalized within the past year?", :options [{:display "no", :value "no"} {:display "yes", :value "yes"}]}
      {:type "textField", :value "", :name "hosp", :title "If yes, name of Hospitol"}
      {:type "toggle", :value "no", :name "slider3", :title "Currently being seen for a Workers Compensations Injury?",
         :options [{:display "no", :value "no"} {:display "yes", :value "yes"}]}
      {:type "textArea", :value "", :name "fam", :title "Family Members current patients at Center Form Family Medicene"}
      {:type "toggle", :value "no", :name "slider4", :title "Have you ever been deisharged from any Eastern Main Medical Physician Office?", 
        :options [{:display "no", :value "no"} {:display "yes", :value "yes"}]}
      {:type "textField", :value "yes", :name "yes", :title "If yes, reason why"}
      {:type "text", :value "I realize that a failure to disclosure accurate information or purposefully omitting information may result in denial of admission or discharge from the Center for Family Medicine once established. CFM is a Family Medicine Residency program; our goal is for the physicians in the Family Medicine Residency to complete our program and be skilled to continue providing excellent care for a wide range of patients within their own practice. We must have a diverse patient population in order to provide our physicians with the best experience. We must limit certain patient populations in order to accomplish these goals."}
      {:type "signature", :title "Patient Signature", :name "sig1", :value "data:image/png;base64,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AAIgAAIgAAIgAAIWEICgtgAeTr2ewO7j5+gy+2lEt25Gvt6e1x9wk3fKLl+h5z7aRIvjktQRL03sw5kUY29yNN4GARAAARAAARAAAechAEHtPHOhi55IVkQpPTiJi7klr6CYHn17LW3ad4bqe7nTvL8Mo3tubWvu6TgOBEAABEAABEAABBxKAILaofj113jC0Uw1qJoWJF69epUSeeHhym3HacHa/SqTYmCADy15YSTFtqub77X+aGJEIAACIAACIAACWiAAQa2FWdJQH+N2nVK9jY28XhSbiugV8clkSNoiJ/h6e9BPr4+l8MCGGhotugoCIAACIAACIAACRBDU+BRYlYCHuxuVXSaS0HltQhtRdSJakrWM6tNWZVHszlZpNzc3q/YFlYEACIAACIAACICAPQi4seDhSL8oIGAdAks3HqYn5qy/aWUiokeziB7VN5Igom+KCTtAAARAAARAAAQ0RACCWkOTpYWuXuZoHZEPLaD8olJjd7083Gny8C4Q0UYi2AABEAABEAABENATAQhqPc0mxgICIAACIAACIAACIGB3AsiUaHfkaBAEQAAEQAAEQAAEQEBPBCCo9TSbGAsIgAAIgAAIgAAIgIDdCUBQ2x05GgQBEAABEAABEAABENATAQhqPc0mxgICIAACIAACIAACIGB3Av8PkCS9ckp1FmkAAAAASUVORK5CYII="}
  ],
   :id "NWP2"}
  )

(defn sample []
  (let [[pk cert] (get-cert "./sigmed.jceks" "test")
        output (pdf/build form)]
    (with-open [fios (new java.io.FileOutputStream "./run.pdf")]
      (println (.size output))
      (.writeTo (pdf/sign (.toByteArray output) pk cert)
 fios))))
